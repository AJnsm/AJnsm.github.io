---
layout: post
title:  "A proportionality proof for the BigPlayer rule"
date:   2022-12-01 10:00:00 +0200
author: Abel Jansma
tags: ethereum maths category-theory cybernetics
---
<span style="color:grey">(This is an update on my Ethereum Protocol Fellowship. More updates can be found [here]({% post_url 2022-10-18-EPF0 %}) ).</span>

<br>

[Last week]({% post_url 2022-11-29-EPF6 %}), I analysed the BigPlayer rule for cake-cutting using the Open Game engine, and found equilibria at proportional distributions for $n \in \[2, 3, 4\]$. Here follows a handwavy proof of general fairness.

<br>

**Definition** Let $n\in \mathbb{N}$ be the total number of players, and let $P_i$ be the name of player $i$. Let $C$ be the total size of the cake to be shared among all players. 

<br>


**Definition** The BigPlayer rule is defined by the following rules:
1. $P_1$ cuts the pie in two pieces, resulting in two pieces of sizes $(a_1 C, (1-a_1 )C)$, where $a_1 \in \[0, 1\]$. 
2. $P_2$ gets to choose one of the pieces.
3. Let $P_\text{BP}$ be the player who ended up with the largest of the two pieces that resulted from the last cut. $P_\text{BP}$ then has to cut their piece in two.
4. A next player---not $P_1$ and not a player that already got to choose a piece---gets to choose one of $P_\text{BP}$'s pieces. 
5. Move to 3 if there are any players left without cake. 

<br>

**Theorem** Cutting a cake of size $C$ with the BigPlayer rule has a Nash equilibrium at a proportional distribution with $n-1$ cuts where each of $n$ players gets a contiguous piece of size $C/n$, to arbitrary precision, as long as players cannot cut cake exactly in half. 

<br>

*(proof)* The $n=1$ case is trivial. The $n=2$ case reduces to the game 'I cut you choose', so inherits the proportional equilibrium. The proof then follows by induction: Assume that the $n$-player implementation has a proportional equilibrium, then consider the game with $n+1$ players. In this game, a proportional first cut would result in two pieces of respective sizes $(\frac{C}{n+1}, \frac{Cn}{n+1})$. If $p_1$ chooses to make this cut, then $P_1$ or $P_2$ ends up either with a piece of size $\frac{C}{n+1}$, or a piece of size $\frac{Cn}{n+1}$ that then has to be shared with $n$ other players. Since the $n$-player game is fair, whoever ends up with the piece of size $\frac{Cn}{n+1}$, and all remaining players, will thus get a proportional piece of size $\frac{C}{n+1}$. 

However, consider possible deviations from an initial proportional cut. If $P_1$ chooses to deviate by $\epsilon>0$, then the resulting pieces are of size $(\frac{C}{n+1} + \epsilon, \frac{Cn}{n+1} - \epsilon)$. If the second piece is the biggest, then $P_\text{BP}$ ends up with a piece of size $\frac{Cn}{n+1} - \epsilon$, to be shared among $n$ players. The proportional equilibrium of the $n$-player game would then give $P_\text{BP}$ and each remaining player a piece of size $\frac{C}{n+1} - \epsilon/n$---smaller than true proportionality among $n+1$ players. Since $P_2$ profits from choosing the first piece, making this deviating first cut is not profitable for $P_1$. Similar reasoning holds if $\epsilon$ is so large that the first piece becomes the biggest: $P_2$ can always force $P_1$ to end up with a smaller piece while profiting themselves. 
The only special case is a cut that leaves two pieces of equal size. In this case, the BigPlayer rule cannot decide who the next player should be and the game is undefined. In fact, any rule that assigns one of two equal pieces to a player necessarily destroys the equilibrium for any $n>2$. 

However, if perfect $(\frac{1}{2}, \frac{1}{2})$ cuts are not allowed, the equilibrium of proportional distribution thus holds for $n+1$ players as long as it holds for $n$ players. Since it holds for $n=2$, it holds in general. 

A final note: The game among the final two players reduces to 'I cut you choose', which means that the equilibrium cut is a perfect $(\frac{1}{2}, \frac{1}{2})$ cut. While these are not allowed, cuts can be arbitrarily close to this, hence this qualifier in the theorem. $\square$

<br>

Note that this rule does not easily generalise to situations where players have different valuation functions, since the choice of $P_\text{BP}$ then depends on the valuation used. 